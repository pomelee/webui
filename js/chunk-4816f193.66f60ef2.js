(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4816f193"],{"4e82":function(t,e,a){"use strict";var i=a("23e7"),r=a("1c0b"),n=a("7b0b"),o=a("d039"),s=a("b301"),l=[].sort,c=[1,2,3],u=o((function(){c.sort(void 0)})),d=o((function(){c.sort(null)})),p=s("sort"),b=u||!d||p;i({target:"Array",proto:!0,forced:b},{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),r(t))}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-tabs",[a("b-tab",{attrs:{title:"Deployment",active:""}},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("basic-table",{attrs:{"table-data":t.deployHistoryData,fields:t.deployHistoryFields,hover:!0,bordered:!0},on:{"row-clicked":t.deployTbSelected}})],1),a("b-col",{attrs:{cols:"6"}},[a("b-tabs",{model:{value:t.deployLogTab,callback:function(e){t.deployLogTab=e},expression:"deployLogTab"}},[a("b-tab",{attrs:{title:"Details",active:""}},[a("simple-grid",{attrs:{dataset:t.deployDetail}})],1),a("b-tab",{attrs:{title:"Logs"}},[a("log-area",{attrs:{message:t.logMessage}})],1)],1)],1)],1)],1),a("b-tab",{attrs:{title:"Build"}},[a("b-row",[a("div",{staticClass:"col text-right"},[a("b-button",{on:{click:t.startBuild}},[t._v("Start Build")])],1)]),a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("basic-table",{attrs:{"table-data":t.buildHistoryData,fields:t.buildHistoryFields,hover:!0,bordered:!0},on:{"row-clicked":t.buildTbSelected}})],1),a("b-col",{attrs:{cols:"6"}},[a("b-tabs",{model:{value:t.buildLogTab,callback:function(e){t.buildLogTab=e},expression:"buildLogTab"}},[a("b-tab",{attrs:{title:"Details",active:""}},[a("simple-grid",{attrs:{dataset:t.buildDetail}})],1),a("b-tab",{attrs:{title:"Logs"}},[a("log-area",{attrs:{message:t.logMessage}})],1)],1)],1)],1)],1)],1),a("one-button-alert",{ref:"defailError",attrs:{name:"defailError"}})],1)},r=[],n=(a("a4d3"),a("4de4"),a("4160"),a("c975"),a("fb6a"),a("4e82"),a("b0c0"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("2fa7")),o=a("2f62"),s=a("1564"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-table",{attrs:{dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"sm",items:t.items,fields:t.captions,"current-page":t.currentPage,"per-page":t.perPage},on:{"row-clicked":t.onRowSelected}})],1)},c=[],u={name:"BasicTable",inheritAttrs:!1,props:{caption:{type:String,default:"Table"},hover:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},tableData:{type:[Array,Function],default:function(){return[]}},fields:{type:[Array,Object],default:function(){return[]}},perPage:{type:Number,default:100},dark:{type:Boolean,default:!1}},data:function(){return{currentPage:1}},computed:{items:function(){var t=this.tableData;return Array.isArray(t)?t:t()},totalRows:function(){return this.getRowCount()},captions:function(){return this.fields}},methods:{getBadge:function(t){return"Active"===t?"success":"Inactive"===t?"secondary":"Pending"===t?"warning":"Banned"===t?"danger":"primary"},getRowCount:function(){return this.items.length},onRowSelected:function(t,e,a){this.$emit("row-clicked",t,e,a)}}},d=u,p=a("2877"),b=Object(p["a"])(d,l,c,!1,null,"197e5b30",null),f=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.dataset,(function(e,i){return a("div",{key:i},[a("b-card",{attrs:{title:e.title}},t._l(e.data,(function(e,i){return a("div",{key:i},[a("b-row",[a("b-col",[t._v(t._s(e.label))]),a("b-col",{attrs:{cols:"8"}},[t._v(t._s(e.data))])],1)],1)})),0)],1)})),0)},m=[],h={name:"",props:{dataset:{default:[]}},watch:{dataset:function(t){}}},y=h,v=Object(p["a"])(y,g,m,!1,null,"1b398c8f",null),L=v.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-textarea",{attrs:{id:"log-area",rows:"30","max-rows":"30"},model:{value:t.currentLog,callback:function(e){t.currentLog=e},expression:"currentLog"}})},O=[],j={name:"",props:{message:{type:String,default:function(){return""}}},data:function(){return{}},computed:{currentLog:function(){return this.message}}},S=j,w=Object(p["a"])(S,N,O,!1,null,"229b68dc",null),B=w.exports,k=a("a3ea"),D=a("0d7a"),x=void 0;function I(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T={name:"detail",components:{BasicTable:f,SimpleGrid:L,LogArea:B,OneButtonAlert:s["a"]},props:{projectName:{type:String,default:function(){return x.currentProject}},packageName:{type:String,default:function(){return x.currentPackage}},lastBuild:{type:String,default:function(){return"#1"}},lastDeploy:{type:String,default:function(){return"#1"}}},data:function(){return{deployHistoryFields:[{key:"version",label:"Last Version"},{key:"history",label:"Status"},{key:"age",label:"Created"}],buildHistoryFields:[{key:"version",label:"Last Build"},{key:"history",label:"Status"},{key:"age",label:"Created"}],selectedDeployVersion:this.lastDeploy.slice(1),selectedBuildVersion:this.lastBuild.slice(1),logMessage:"",deployLogTab:0,buildLogTab:0}},computed:P({},Object(o["d"])("project",["currentProject","currentPackage"]),{},Object(o["d"])("build",["buildConfigs","buildList"]),{},Object(o["d"])("deploy",["deployConfigs"]),{},Object(o["d"])("pod",["podList"]),{},Object(o["d"])("controller",["controllerList"]),{deployHistoryData:function(){var t=this,e=[];return this.controllerList.items.forEach((function(a){a.metadata.labels.app===t.packageName&&e.push({version:"#"+a.metadata.annotations["openshift.io/deployment-config.latest-version"],history:a.metadata.annotations["openshift.io/deployment.phase"],age:Object(D["a"])(a.metadata.creationTimestamp)})})),e.sort(this.sortFunction),e[0]&&(this.selectedDeployVersion=e[0].version.slice(1)),e},buildHistoryData:function(){var t=this,e=[];return this.buildList.items.forEach((function(a){a.metadata.annotations["openshift.io/build-config.name"]===t.packageName&&e.push({version:"#"+a.metadata.annotations["openshift.io/build.number"],history:a.status.phase,age:Object(D["a"])(a.metadata.creationTimestamp)})})),e.sort(this.sortFunction),e[0]&&(this.selectedBuildVersion=e[0].version.slice(1)),e},deployDetail:function(){var t=[],e=[{label:"Status",data:"-"},{label:"IP",data:"-"},{label:"Node",data:"-"},{label:"Restart Policy",data:"-"}],a=[{label:"Status",data:"-"},{label:"Ready",data:"-"},{label:"RestartCount",data:"-"}],i=[{label:"Image",data:"-"},{label:"Build",data:"-"},{label:"Source",data:"-"},{label:"Ports",data:"-"},{label:"Mount",data:"-"}],r=[{label:"Type",data:"-"},{label:"Secret",data:"-"}],n=Object(k["b"])(this.controllerList,this.packageName,this.selectedDeployVersion);window.controller=n,n&&(e[0].data=n.metadata.annotations["openshift.io/deployment.phase"],i[0].data=n.spec.template.spec.containers[0].image.substring(0,n.spec.template.spec.containers[0].image.indexOf("@sha")),n.spec.template.spec.containers[0].ports&&(i[3].data=n.spec.template.spec.containers[0].ports[0].containerPort+"/"+n.spec.template.spec.containers[0].ports[0].protocol),i[4].data=n.spec.template.spec.containers[0].volumeMounts,r[0].data=n.spec.template.spec.volumes);var o=Object(k["e"])(this.podList,this.packageName);o&&(i[1].data=o.metadata.annotations["openshift.io/build.name"]);var s=Object(k["d"])(this.podList,this.packageName,this.selectedDeployVersion);return window.pod=s,s&&(e[0].data=s.status.phase,e[1].data=s.status.podIP,e[2].data=s.spec.nodeName,e[3].data=s.spec.restartPolicy,!0===s.status.containerStatuses[0].ready?a[0].data=s.status.phase+" since "+s.status.containerStatuses[0].state.running:a[0].data=JSON.stringify(s.status.containerStatuses[0].state),a[1].data=s.status.containerStatuses[0].ready,a[2].data=s.status.containerStatuses[0].restartCount,i[4].data=s.spec.containers[0].volumeMounts[0].name+" -> "+s.spec.containers[0].volumeMounts[0].mountPath+" "+(s.spec.containers[0].volumeMounts[0].readOnly?"read-only":"")),t.push({title:"Status",data:e}),t.push({title:"Container",data:a}),t.push({title:"Template",data:i}),t.push({title:"Volumes",data:r}),t},buildDetail:function(){var t=[],e=[{label:"Status",data:"-"},{label:"Started",data:"-"},{label:"Duration",data:"-"}],a=[{label:"Build Strategy",data:"-"},{label:"Builder Image",data:"-"},{label:"Source Type",data:"-"},{label:"Source Repo",data:"-"},{label:"Source Ref",data:"-"},{label:"Source Commit",data:"-"},{label:"Output Image",data:"-"}],i=Object(k["a"])(this.buildList,this.packageName,this.selectedBuildVersion);return i&&(e[0].data=i.status.phase,e[1].data=Object(D["a"])(i.status.startTimestamp),e[2].data=i.status.duration,a[0].data=i.spec.strategy.type,a[1].data=i.spec.strategy[i.spec.strategy.type.toLowerCase()+"Strategy"].from.name,a[2].data=i.spec.source.type,a[3].data=i.spec.source.git.uri,a[4].data=i.spec.source.git.ref,a[5].data=i.spec.revision.git.message+" authored by "+i.spec.revision.git.author.email,a[6].data=i.spec.output.to.name),t.push({title:"Status",data:e}),t.push({title:"Configuration",data:a}),t},getSelectedDeployVersion:function(){return this.selectedDeployVersion},getSelectedBuildVersion:function(){return this.selectedBuildVersion}}),mounted:function(){this.requestLists()},methods:P({},Object(o["b"])("build",["getBuildConfigList","getBuildList","getBuildLog","instantBuild","watchBuild"]),{},Object(o["b"])("deploy",["getDeployConfigList"]),{},Object(o["b"])("pod",["getPodList","getPodLog"]),{},Object(o["b"])("controller",["getControllerList"]),{requestLists:function(){var t=this;0===this.buildConfigs.items.length&&(this.getBuildConfigList(this.projectName).then((function(e){t.getBuildList(t.projectName)})),this.getDeployConfigList(this.projectName).then((function(e){t.getPodList(t.projectName),t.getControllerList(t.projectName)})))},deployTbSelected:function(t,e,a){this.selectedDeployVersion=t.version.slice(1),this.getDeployLog()},buildTbSelected:function(t,e,a){this.selectedBuildVersion=t.version.slice(1),this.getDeployLog()},getDeployLog:function(){var t=this;this.logMessage="";var e=Object(k["d"])(this.podList,this.packageName,this.selectedDeployVersion);e?this.getPodLog({projectName:this.projectName,podName:e.metadata.name}).then((function(e){t.logMessage=e})):this.logMessage=""},getRosBuildLog:function(){var t=this;this.logMessage="";var e=Object(k["a"])(this.buildList,this.packageName,this.selectedBuildVersion);e&&this.getBuildLog({projectName:this.projectName,buildName:e.metadata.name}).then((function(e){t.logMessage=e}))},startBuild:function(){var t=this;this.instantBuild({projectName:this.projectName,buildName:this.packageName}).then((function(e){t.watchBuild(t.projectName)})).catch((function(e){t.$refs.packageError.show({title:t.$i18n.t("popup.startBuild"),text:e})}))},sortFunction:function(t,e){var a=t.version.slice(1),i=e.version.slice(1);return Number(a)>Number(i)?-1:Number(a)<Number(i)?1:0}}),watch:{deployLogTab:function(t){1===t&&this.getDeployLog()},buildLogTab:function(t){1===t&&this.getRosBuildLog()}}},A=T,E=Object(p["a"])(A,i,r,!1,null,"cb768884",null);e["default"]=E.exports},"58a8":function(t,e,a){var i=a("1d80"),r=a("5899"),n="["+r+"]",o=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),l=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},a3ea:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return s}));a("c740"),a("caad"),a("b0c0"),a("2532");function i(t,e,a){var i=t.items.findIndex((function(t){return t.metadata.name===e+"-"+a}));if(-1!==i)return t.items[i]}function r(t,e){var a=t.items.findIndex((function(t){return t.metadata.name===e}));if(-1!==a)return t.items[a]}function n(t,e,a){var i=t.items.findIndex((function(t){return t.metadata.name===e+"-"+a}));if(-1!==i)return t.items[i]}function o(t,e,a){var i=t.items.findIndex((function(t){return t.metadata.name.includes(e)&&t.metadata.annotations["openshift.io/deployment-config.latest-version"]==a}));if(-1!==i)return t.items[i]}function s(t,e){var a=t.items.findIndex((function(t){return t.metadata.name.includes(e)&&t.metadata.name.includes("-build")}));if(-1!==a)return t.items[a]}},a9e3:function(t,e,a){"use strict";var i=a("83ab"),r=a("da84"),n=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),b=a("241c").f,f=a("06cf").f,g=a("9bf2").f,m=a("58a8").trim,h="Number",y=r[h],v=y.prototype,L=l(p(v))==h,N=function(t){var e,a,i,r,n,o,s,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(n=c.slice(2),o=n.length,s=0;s<o;s++)if(l=n.charCodeAt(s),l<48||l>r)return NaN;return parseInt(n,i)}return+c};if(n(h,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var O,j=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof j&&(L?d((function(){v.valueOf.call(a)})):l(a)!=h)?c(new y(N(e)),a,j):N(e)},S=i?b(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)s(y,O=S[w])&&!s(j,O)&&g(j,O,f(y,O));j.prototype=v,v.constructor=j,o(r,h,j)}},c975:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").indexOf,n=a("b301"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,l=n("indexOf");i({target:"Array",proto:!0,forced:s||l},{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,a){"use strict";var i=a("23e7"),r=a("861d"),n=a("e8b5"),o=a("23cb"),s=a("50c4"),l=a("fc6a"),c=a("8418"),u=a("1dde"),d=a("b622"),p=d("species"),b=[].slice,f=Math.max;i({target:"Array",proto:!0,forced:!u("slice")},{slice:function(t,e){var a,i,u,d=l(this),g=s(d.length),m=o(t,g),h=o(void 0===e?g:e,g);if(n(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(d,m,h);for(i=new(void 0===a?Array:a)(f(h-m,0)),u=0;m<h;m++,u++)m in d&&c(i,u,d[m]);return i.length=u,i}})}}]);
//# sourceMappingURL=chunk-4816f193.66f60ef2.js.map